- [第2章 数组及矩阵的创建及操作](#%E7%AC%AC2%E7%AB%A0-%E6%95%B0%E7%BB%84%E5%8F%8A%E7%9F%A9%E9%98%B5%E7%9A%84%E5%88%9B%E5%BB%BA%E5%8F%8A%E6%93%8D%E4%BD%9C)
  - [2.1 基本概念](#21-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5)
    - [2.1.1 常量和变量](#211-%E5%B8%B8%E9%87%8F%E5%92%8C%E5%8F%98%E9%87%8F)
  - [2.2 数组及矩阵的创建和操作](#22-%E6%95%B0%E7%BB%84%E5%8F%8A%E7%9F%A9%E9%98%B5%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E4%BD%9C)
    - [2.2.1 数据及矩阵的输入](#221-%E6%95%B0%E6%8D%AE%E5%8F%8A%E7%9F%A9%E9%98%B5%E7%9A%84%E8%BE%93%E5%85%A5)
    - [2.2.2 数组及矩阵元素操作](#222-%E6%95%B0%E7%BB%84%E5%8F%8A%E7%9F%A9%E9%98%B5%E5%85%83%E7%B4%A0%E6%93%8D%E4%BD%9C)
  - [2.3 多维数组](#23-%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84)
    - [2.3.1 多维数组的创建](#231-%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84%E7%9A%84%E5%88%9B%E5%BB%BA)
    - [2.3.2 多维数组的标识](#232-%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84%E7%9A%84%E6%A0%87%E8%AF%86)
  - [2.4 本章小结](#24-%E6%9C%AC%E7%AB%A0%E5%B0%8F%E7%BB%93)

# 第2章 数组及矩阵的创建及操作


>本系列教程目前基于MATLABR2006a，可能对于更高级版本的功能和函数有差异，教程中如有问题，请联系：156204968@qq.com

MATLAB中的数学计算部分包括数值计算和符号计算两大部分，数值计算是MATLAB的核心，在数值计算过程中，同样需要辅以适当的符号运算，目前符号运算的发展也非常完善，同样得到广泛的应用。本章将主要介绍数值计算部分中的数组及矩阵的创建及寻访等操作，内容包括：
*  基本概念
*  数组及矩阵的创建和操作
*  多维数组


## 2.1 基本概念

本节将介绍MATLAB中的一些基本概念，包括常量、变量以及矩阵、数组。MATLAB编译环境中，主要的常量包括圆周率pi, 最小数值eps, 无穷大inf等。每一个编译器都有自身的变量命名法则，对于MATLAB同样如此，首先变量名不能以数字开头，不能与系统函数冲突，否则会出现意想不到的错误。而MATLAB之所以作为科学计算的首选工具，其原因在于MATLAB强大的矩阵和数组计算能力，下面的章节将详细介绍相关的概念。
### 2.1.1 常量和变量

MATLAB经常使用的参变量可分为为常量和变量。例如下列的内容都是合法的常量。

`1 -1.20 0.11e+10 -5e+2 0.5+5i `

由于常量的使用比较简单，在此不做重点介绍。重点介绍经常使用的变量的定义和使用。

（1）变量的命名规则

变量的命名需要遵循以下几条规则。

*  变量名的组成可以是英文字母、数字和下划线。

*  变量名的第一个字符必须英文字母，并且区分大小写，例如out和Out是两个不同的变量。

*  变量名的长度不能超过63个字符，并且变量名中不能含有空格和标点符号。

>注意：*MATLAB已经定义的一些关键字不能作为变量名使用，例如程序控制流字if、while、for、return等。*

用户在MATLAB中使用变量时一般不需要事先声明，系统会根据实际使用情况自动生成变量，并安排合适的存储空间，这一点与其他的编程语言不同，极大程度上方便了用户的使用。

（2）特殊变量

与C、C++等其他的编程语言不同，MATLAB除了用户自己可以定义和使用变量例外，系统还预先定义了一些特殊的变量和常数，见表2.1所示。这些特殊变量当MATLAB启动时驻留在内存。值得注意的是用户在定义自己的变量时，应该尽量的避免使用这些特殊变量名，以免造成逻辑上的错误。 
| 特殊变量 | 取值| 
| ------------ |-----------|
|`ans`| 运算结果的默认变量名|
| `pi `| 圆周率π|
| `eps` |计算机的最小数 |
| `inf `|无穷大，如1/0 |
| `NaN或nan` |非数，如0/0、∞/∞、0×∞|
| `i或 j` |i=j=sqrt(-1)|
| `nargin` |函数的输入变量数目 |
| `nargout` |函数的输出变量数目 |
| `realmin `|最小的可用正实数|
| `realmax`|最大的可用正实数 |

			
>注意：*表中的变量名如果没有被用户使用，那么变量的值为系统的预定义值。如果用户对上表中的变量进行了重新赋值，则变量的值被临时覆盖，变为用户定义的值。此时可以在命令输入窗口中输入`clear`命令消除用户自定义的变量值。*

## 2.2 数组及矩阵的创建和操作

本节将介绍数组及矩阵的创建和操作，包括数组的输入以及数组元素的操作。由于数组和矩阵在创建和寻访的处理方式类似，因此将两者综合一起说明。

### 2.2.1 数据及矩阵的输入

输入的方法有多种，常用的主要有直接输入法、语句生成法以及特殊矩阵函数生成法。另外还有MAT数据文件加载生成法及M文件输入法。
（1）直接输入法
 最简单、最常用的构造方法，一般用于数组及矩阵维数比较少的情况。

>【例2.1】数组直接输入法
`>> x=[3.5 pi/2 sqrt(3) 3+5i] %采用空格生成1×4的数组`
上述语句得到数组x：
x=3.5000 1.5708 1.7321 3.0000+5.0000i

>【例2.2】矩阵直接输入法
`>> a=[1 2 3;4 5 6;7 8 9] %生成3×3的数组矩阵`
上述语句得到矩阵a：
a =
 1 2 3
 4 5 6
 7 8 9
命令中的“;”表示矩阵的一行结束，使用换行同样可以得到上面的矩阵a，代码如下所示。
`>> a=[1 2 3
4 5 6
7 8 9]`

>注意：*(1) 数组创建使用操作符方括号([])
 (2) 每行内的元素间用逗号或空格隔开；
 (3) 行与行之间用分号或回车键隔开；
 (4) 元素可以是数值或表达式。*

（2）语句生成法
使用语句生成法可以生成固定步长的数组或矩阵。常用的格式：
`x=from:step:to `
其中`from、step和to`分别表示开始值、步长和结束值，中间用冒号分隔。当`step`省略时则默认为`step=1`。以步长`step`为采样间隔生成x，x中第一个元素为`from`，如果`（to-from）`为`step`的整数倍则最后一个元素为to，否则小于to。下面结合示例具体介绍该方式的使用。

>【例2.3】使用`“from:step:to”`方式生成以下数组
①生成开始值为1，结束值为5，间隔为0.5的数组。在命令窗口输入：
`>> a1=1:0.5:5 %开始值为1，结束值为5，间隔为0.5的数组`
此时，生成的数组a1如下所示。
`a1 =`
` 1.0000 1.5000 2.0000 2.5000 3.0000 3.5000 4.0000 4.5000 5.0000`
②如果只设置开始值和结束值，间隔值step不设置，生成数组时step默认为1。例如在命令窗口输入以下内容：
`>> a2=1:10 %开始值为1，结束值为10，默认间隔为1的数组`
结果如下：
`a2 =
 1 2 3 4 5 6 7 8 9 10`
③如果开始值>结束值，并且步长step>0，则生成数组失败，数组为空。例如在命令窗口输入以下内容：
`>> a3=5:0.5:1 %开始值为5，结束值为1，间隔为-0.5的数组`
此时，得到如下所示的结果。
`a3 =
 Empty matrix: 1-by-0`
④如果开始值>结束值，步长step<0，可以成功生成数组。例如在命令窗口输入：
`>> a4=5:-0.5:1`  
结果如下：
`a4 =
 5.0000 4.5000 4.0000 3.5000 3.0000 2.5000 2.0000 1.5000 1.0000`

>注意：*（1）step默认值为1；
 （2）当step>0而from>to时为空矩阵或当step<0而from<to时也为空矩阵；
 （3）冒号必须是英文状态下输入的冒号，否则会产生计算错误。*

除了使用“from:step:to”格式生成固定步长的数组，还可以使用`linspace`和`logspace`函数生成数组。`linspace`函数的语法格式如下：
`linspace(a,b,n) `
其中，a、b、n三个参数分别表示开始值、结束值和元素个数。该函数生成从a到b之间线性分布的n个元素的行向量，n如果省略则默认值为100。

`logspace`函数的语法格式如下：
`logspace (a,b,n)`
该函数与linspace类似，给出开始值、结束值和元素个数，不过logspace用来生成对数等分向量。它生成从10^a到10^b之间按对数等分的n个元素的行向量。n如果省略则默认值为50。

>【例2.4】用linspace和logspace函数生成行向量
①生成从0到2*pi的线形采样的（1×10）向量，在命令窗口输入：
`>> A=linspace(0,2*pi,10) %生成从0到2*pi的线形采样的，元素个数为10`
用linspace函数生成的矩阵A：
`A =
 0 0.6981 1.3963 2.0944 2.7925 3.4907 4.1888 4.8869 5.5851 6.2832 `
②生成从0到2的对数采样的（1×9）向量，在命令窗口输入：
`>> B=logspace(0,2,9) %生成从0到2的对数采样，元素个数为9`
用logspace函数生成的矩阵B：
`B =
 1.0000 1.7783 3.1623 5.6234 10.0000 17.7828 31.6228 56.2341 100.0000`

（3）特殊矩阵生成函数法

前面介绍的两种方法一般应用在生成比较简单的数组或向量，但是在实际应用过程中经常会使用一些比较特殊的有分布规律的矩阵，MATLAB提供了很多能够产生特殊矩阵的函数，各函数的指令与功能如表2.2所示。

| 函数名 |功能| 
| ------------ |-----------|
|`zeros(m,n)`| 产生m×n的全0矩阵|
| `ones(m,n)`| 产生m×n的全1矩阵|
| `rand(m,n)	` |产生m×n均匀分布的随机矩阵，元素取值范围0.0～1.0。 |
| `randn(m,n)`|产生m×n正态分布的随机矩阵|
| `magic(N)	` |产生N阶魔方矩阵(矩阵的行、列和对角线上元素的和相等)|
| `eye(m,n)	` |产生m×n的单位矩阵|


	
	
	

>注意：*（1）zeros、ones、rand、randn和eye函数当只有一个参数n时，则为n×n的方阵；
      （2）当eye(m,n)函数的m和n参数不相等时则单位矩阵会出现全0行或列。*


>【例2.5】特殊矩阵生成函数
①若要生成一个（2×3）全零矩阵，可以在命令窗口输入：
`>> zeros(2,3) %生成一个（2×3）全零矩阵`
此时，生成的矩阵为：
`ans = 0 0 0
 0 0 0`
②若要生成一个（2×3）全1矩阵，可以在命令窗口输入：
`>> ones(2,3) %生成一个（2×3）全1矩阵`
结果如下：
`ans =
 1 1    1
 1 1`
③若要生成一个（3×3）均匀分布的随机矩阵，可以在命令窗口输入：
`>> rand(3,3)   %该矩阵元素的取值为0.0~1.0，均匀分布的随机矩阵`
由上述语句生成的随机矩阵如下所示（计算结果随机）。
`ans =
 0.9501 0.4565 0.9218
 0.2311 0.0185 0.7382
 0.6068 0.8214 0.1763`
④若要生成一个（3×3）正态分布的随机矩阵，可以在命令窗口输入：
`>> randn(3,3) %正态分布的随机矩阵`
结果如下：
`ans =
 -0.4326 1.1892 -0.5883
 -1.6656 -0.0376 2.1832
 0.1253 0.3273 -0.1364`
⑤若要生成一个（4×4）的魔方矩阵，可以在命令窗口输入：
`>> magic(4) %生成一个4×4的魔方矩阵`
由magic函数产生的魔方矩阵如下所示。
`ans =
 16 2 3 13
 5 11 10 8
 9 7 6 12
 4 14 15 1`
⑥若要生成一个（3×3）的单位矩阵，可以在命令窗口输入：
`>> eye(3) %生成一个3×3的单位矩阵`
由eye函数产生的单位矩阵如下所示。
`ans = 1 0 0
 0 1 0
 0 0 1`

（4）MAT数据文件加载生成法

MATLAB启动后，系统会自动建立一个工作空间，在用户进行操作前，该工作空间中只包含系统提供的一些特殊变量，如pi、eps等。用户使用过程中会增加一些自己定义的变量，如果用户不使用clear指令来清除，这些自定义的变量会一直被保存在该工作空间，直到关闭系统。如果希望该工作空间中的变量可以保存以便下次使用，可以使用save指令保存为MAT数据文件，使用load指令或选择菜单`【File】`下的`【Import Data】`命令加载MAT数据文件来创建变量，

>【例2.6】使用指令方式保存和加载MAT数据文件
`>> clear all %清除工作空间中所有的变量`
`>> x=[1:4]; y=linspace(1,10,10); %生成变量x和y`
`>> who %查看内存中的变量，结果显示有两个变量x和y`
使用who命令可以查看内存中的变量，在本例中查出内存中已经生成了两个变量x和y，结果如下所示。
`Your variables are:
x y `
为了方便以后使用这两个变量，接下来在命令窗口输入：
`>> save myxy %使用save指令将内存变量保存入myxy.mat数据文件中`
通过save命令可以将指令保存到MAT文件中，myxy就是保存的数据文件名。使用clear all命令清除工作空间中的所有变量。
`>> clear all %清除工作空间中所有的变量`
此时在命令窗口输入：
`>> y %输入变量y查看该变量的值，结果显示该变量没有被定义`
得到如下的提示结果。
`??? Undefined function or variable 'y'.`
为了能够使用已经保存的变量，可以通过load指令获取。在命令窗口中接着输入：
`>> load myxy %使用load指令将myxy.mat数据文件中保存的变量加载入当前工作空间`
`>> y %输入变量y查看该变量的值`
此时，得到y变量的结果如下所示。
`y = 1 2 3 4 5 6 7 8 9 10`

（5）M文件创建矩阵

对于今后经常要调用的数组，尤其是比较大的复杂数组，可以为其专门建立一个M文件。具体方法是打开文件编辑器，写入这个矩阵内容并为其命名，保存这个M文件，以后凡是要用到这个矩阵，只要运行这个M文件，这个矩阵就会自动生成并保存于MATLAB的内存中。

>【例2.7】用M文件创建大矩阵，文件名为example.m
打开文件编辑调试器，输入以下内容，并保存此文件为example.m。
`%example.m 创建矩阵exam`
`exm=[ 456 468 873 2 579 55`
`21 687 54 488 8 13 65 4567 88 98 21 5`
`456 68 4589 654 5 987`
`5488 10 9 6 33 77];`
在文件编辑调试器中运行或在MATLAB窗口输入example就可以生成矩阵exam。
`>> example;`
`>> size(exm)      %显示exm的大小，exm有5行6列`
上述语句得到exm矩阵的大小，结果如下所示。
`ans= 5 6`

### 2.2.2 数组及矩阵元素操作
对矩阵元素的操作是矩阵操作的基本技巧，下面将介绍矩阵元素的表示方式、子矩阵块的寻访和赋值以及矩阵的特殊操作等一些基本操作。

（1）矩阵元素的表示方式
矩阵和多维数组都是由多个元素组成的，每个元素通过下标来标识。元素的标示方式有两种：全下标方式和单下标方式。

全下标方式是指由行下标和列下标表示矩阵的元素，即指明是“第几行，第几列”位置上的元素。使用该标识方法比较直观，几何概念比较清晰，是最常使用的一种标识方式。例如一个`m×n`的A矩阵的第i行第j列的元素表示为`A（i,j）`。

单下标方式是指只用一个下标来指明元素在数组中的位置。通过单下标方式表示矩阵元素首先要把元素进行一维编号。对于二维数组，首先把二维数组的所有列按先左后右的次序首尾相接排成一维长列，然后自上往下对元素位置进行编号。通过该编号就可以直接获得指定位置的数组或矩阵元素。以m×n的矩阵A为例，若元素`A（i,j）`则对应的“单下标”为`s=（j-1）×m＋i`。如果对于只有１行或１列的向量，直接用`A（i）`来表示该向量中第i个元素。

>【例2.8】矩阵元素的提取
`>> A=rand(4) %生成一个4×4的随机分布的矩阵A`
上述语句生成一个（4×4）的随机分布的矩阵A，具体如下：
`A = 0.9501 0.8913 0.8214 0.9218
 0.2311 0.7621 0.4447 0.7382
 0.6068 0.4565 0.6154 0.1763
 0.4860 0.0185 0.7919 0.4057`
①若要双下标方式提取矩阵A的第2行第3列对应的元素，可在命令窗口输入：
`>> A(2,3) %双下标方式提取矩阵A的第2行第3列对应的元素`
则提取到的矩阵A中的元素显示如下，读者可以对照上面的矩阵检查提取到的元素是否是对应位置上的元素。
`ans = 0.4447`
②若要单下标方式提取第1行第3列对应的元素，可在命令窗口输入：
`>> A(15) `  
则提取到的矩阵A中的元素为：
`ans = 0.1763`

>注意：*（1）如果在提取矩阵元素值时，矩阵元素的下标行或列(i,j)大于矩阵的大小(m,n)，MATLAB会提示出错；
  （2）在给矩阵元素赋值时，如果行或列(i,j)超出矩阵的大小(m,n)，MATLAB会自动扩充矩阵，扩充部分以0填充。*

（2）子矩阵块的寻访和赋值
在理解和掌握了对矩阵元素标识的方法后，就很容易理解和掌握子矩阵的寻访和赋值操作。子矩阵是从对应矩阵中取出一部分元素构成，用全下标或单下标方式提取子矩阵或进行重新赋值，具体参见表2.3。

| 格式 |使用说明| 
| :------: |-----------|
|`A(r,c)   `| 由A的“r指定行”和“c指定列”上的元素组成|
| `A(r,:)	`| 由A的“r指定行”和“全部列”上的元素组成|
| `A(:,c)	` |由A的“全部行”和“c指定列”上的元素组成 |
| `A(:)	`|单下标方式寻访，由A的全部元素组成|
| `A(s)	` |单下标方式寻访，生成s指定的一维数组。s若是行数组（列数组），则A(s)就是长度相同的行数组（列数组）。|
| `A(L)` |“逻辑1”方式寻访，生成一维列数组，由与A同样大小的逻辑数组L中的“1”元素选出A的对应元素，按单下标次序排成长列组成|
 |`A(r,c)=Sa`|		以双下标方式，对子数组A(r，c)进行赋值，Sa的行、列大小必须与A(r，c)的相同|
|`A(:)=D(:)`	|全元素赋值方式，保持A的行、列大小不变，要求A、D两个数组的总元素数相同，但行、列大小不一定相同。|
|`A(s)=Sa`	|以单下标方式对A的部分元素进行重新赋值，保持A的行、列大小不变。要求s单下标数组的长度必须与一维数组Sa的长度相等，但s、Sa不一定都是行数组或列数组。|

>【例2.9】对矩阵A，以不同的方式进行寻访操作示例
`>> A=magic(4); %创建4×4的魔方矩阵A`
下面将对魔方矩阵A以不同的方式进行寻访操作，读者可以将下面各语句执行的结果与矩阵A中的元素进行比较，以加深对矩阵元素寻访操作的理解。
①若以单下标方式寻访矩阵A中编号为1和4对应的元素，可在命令窗口输入：
`>> B=A([1,4])     `
结果显示如下：
`B = 16 4`
②若以双下标方式寻访矩阵A中第1、3行和第2、3列对应的元素，可在命令窗口输入：
`>> B1=A([1 3],[2 3]) `
寻访到的矩阵A中的元素如下：
`B1 = 2 3 7 6`
若以双下标方式寻访矩阵A中第1到3行和第2到3列上对应的元素，可在命令窗口输入：
`>> B2=A(1:3,2:3)   `
寻访到的矩阵A中的元素如下：
`B2 = 2 3
11 10
 7 6`
④若要寻访矩阵A的第3列对应的所有元素，可在命令窗口输入：
`>> B3=A(:,3)  `
结果显示如下：
`B3 = 3
 10
 6
 15`
⑤若要寻访矩阵A第1至3行的最后一个元素，可在命令窗口输入：
`>> B4=A(1:3,end) %end表示最后行或者列`
提取到的矩阵的元素显示如下：
`B4 =
 13
 8
 12`

在实际使用过程中，经常会遇到寻找矩阵中大于某个值的元素等类似的问题，当遇到此类问题时采用逻辑矩阵的方法来提取子矩阵或进行重新赋值操作就很方便。所谓的逻辑矩阵就是该矩阵对应的各元素取值只能为1或0。使用逻辑矩阵寻访矩阵时，逻辑矩阵的大小和将要寻访矩阵的大小相同，可以用A(L)来提取矩阵A中的子矩阵，其中L为逻辑向量或逻辑矩阵，当L的元素为0时则不取该位置元素，为1则取该位置的元素。

>【例2.10】利用逻辑矩阵来提取矩阵
`>> A=rand(4) 生成一个4×4的随机矩阵A`
上述语句生成一个（4×4）的如下随机矩阵A：
`A = 0.9355 0.0579 0.1389 0.2722
 0.9169 0.3529 0.2028 0.1988
 0.4103 0.8132 0.1987 0.0153
 0.8936 0.0099 0.6038 0.7468`
下面将利用逻辑矩阵对随机矩阵A进行寻访操作，读者可以将下面各语句执行的结果与矩阵A中的元素进行比较，以加深对利用逻辑矩阵对矩阵寻访操作的理解。
①若要提取矩阵A第一列上L1向量的值为1对应的元素，首先在命令窗口输入逻辑向量L1：
`>>L1=logical([1 0 1 1]) %生成行逻辑向量`
然后在命令窗口输入以下内容：
`>> A(L1)`  
通过L1提取到的矩阵中的元素如下：
`ans = 0.9355 0.4103 0.8936`
②利用矩阵B提取矩阵A中所有>0.5的元素。
首生成矩阵B，可以在命令窗口输入以下内容：
`>> B=A>0.5;  `
上述语句判断矩阵A中所有元素是否>0.5，如果该元素>0.5则返回矩阵对应的该位置显示1，否则显示0。然后利用矩阵B提取矩阵A中所有>0.5的元素。在命令窗口输入：
`>> A(B)’ %为了方便显示，转化为行向量`   
结果显示如下：
`ans = 0.9355 0.9169 0.8936 0.8132 0.6038 0.7468`

>【例2.11】矩阵的赋值
可以采用单下标方式和双下标方式对矩阵的元素赋值，通过下面的操作可以看出，采用双下标方式比较直观和容易操作，仍然采用例2.10所示的随机矩阵A。
①采用双下标方式将矩阵A第1到2行和第1到3列对应的元素赋值为1。在命令窗口输入：
`>> A(1:2,1:3)=[1 1 1;1 1 1] %将A矩阵的1，2两行，1到3列对应元素赋值为1`
上述语句执行的结果如下，对比上面的矩阵A观察赋值后的变化。
`A = 1.0000 1.0000 1.0000 0.2722
 1.0000 1.0000 1.0000 0.1988
 0.4103 0.8132 0.1987 0.0153
 0.8936 0.0099 0.6038 0.7468`
②采用单下标方式将矩阵A的编号为12至15的四个元素赋值为1。对应为A矩阵的第4行第3列元素以及第4列的1到3行元素。在命令窗口输入：
`>> A(12:15)=[1 1 1 1]  %将A矩阵的第12到15个位置赋值为1。`
上述语句执行的结果如下，对比上面的矩阵A观察赋值后的变化。
`A = 1.0000 1.0000 1.0000 1.0000
 1.0000 1.0000 1.0000 1.0000
 0.4103 0.8132 0.1987 1.0000
 0.8936 0.0099 1.0000 0.7468`
③采用单下标方式A(:)=B的形式给矩阵A的所有元素赋值时，矩阵B的元素总数必须等于矩阵A的元素总数，但行列数不一定相等。例如：
`>> A=[1 2;3 4;5 6]   %生成A矩阵`
`>> B=[1 2 3;4 5 6] %生成B矩阵`
在命令窗口输入以下内容，利用矩阵B对矩阵A进行赋值。
`>> A(:)=B %用B对A进行赋值`
上述语句的执行结果如下：
`A = 1 5
 4 3
 2 6`

>【例2.12】矩阵元素的删除
删除操作就是把选定的矩阵元素赋值为空矩阵(用[]表示)。首先在MATLAB工作空间创建一个四阶的魔方阵，使用magic命令如下所示：
`>> A=magic(4) %生成四阶的魔方阵`
下面将对矩阵A进行删除操作，可以将以下各语句的执行结果与矩阵A进行比较，理解矩阵删除操作的执行情况。
①将矩阵A的第三列用空阵代替，即删除第三列上的元素。可在命令窗口输入：
`>> A(:,3)=[] %删除矩阵A的第三列元素`
删除第三列上所有元素后，矩阵如下：`A = 16 2 13
5 11 8
 9 7 12
 4 14 1`
②使用单下标删除矩阵相关操作和赋值语句基本相同，在命令窗口中输入：
`>> A=magic(4) %生成四阶的魔方阵`
`>> A(15)=[] %删除A矩阵的第15个元素，此时A成为15个元素的行向量；`

>注意：  *使用矩阵元素删除操作时，不允许使用具体下标的形式删除某行或者某列中的单个元素，否则，无法形成矩阵。因此通常采用整行或者整列元素的删除方式。*

>【例2.13】生成大矩阵
在MATLAB中，可以通过方括号“[]”实现对已有的矩阵进行扩展，将小矩阵联接起来生成一个较大的矩阵。MATLAB提供了反转、提取、插入、重组等多种操作，在后面的相关章节会有所介绍，在这里只简单的介绍将两个比较小的矩阵合并为一个比较大的矩阵的操作。首先在MATLAB工作空间创建一个四阶的单位对角阵：
`>>A=eye(4) %生成对角单位阵列`
以单位矩阵A为基础，通过矩阵的合并生成比较大的矩阵。
①将矩阵A上下叠加生成新矩阵。在命令窗口中输入：
`>> B=[A;A] %上下重叠矩阵，相当于操作reshape(A,2,1)`
②将矩阵A左右叠加生成新矩阵。在命令窗口中输入：
`>> C=[A A]  %左右叠加矩阵，相当于操作reshape(A,1,2)`

（3）矩阵的特殊操作
MATLAB提供了对矩阵的特殊操作，比较常用的有矩阵的上三角和下三角矩阵的提取、矩阵翻转和旋转等操作详见表2.4所示。
|函数名|	功能|
|-------|------------------------|
|`triu(X)`|	产生X矩阵的上三角矩阵，其余元素补0|
|`tril(X)`|	产生X矩阵的下三角矩阵，其余元素补0|
|`flipud(X)`|	使矩阵X沿水平轴上下翻转|
|`fliplr(X)`|	使矩阵X沿垂直轴左右翻转|
|`Flipdim(X,dim)`|	使矩阵X沿特定轴翻转。dim=1，按行维翻转；dim=2，按列维翻转|
|`rot90(X)`|	使矩阵X逆时针旋转90º|



>【例2.14】矩阵特殊操作的示例
首先在MATLAB命令行窗口中输入以下命令，生成四阶的魔方阵：
`>> X=magic(4) %生成四阶的魔方阵`
下面将以矩阵X为基础，进行矩阵的三角矩阵提取、矩阵的翻转和旋转等各种操作。表2.4中已经详细地介绍了矩阵的相关操作函数，这里不一一举例演示相关函数的使用。提取矩阵X上三角矩阵操作，可在命令窗口中输入：
`>> triu(X) %提取矩阵的上三角矩阵，下三角元素为零`
提取得到的矩阵X的上三角矩阵如下：
`ans =
 16 2 3 13
 0 11 10 8
 0 0 6 12
 0 0 0 1`

## 2.3 多维数组
### 2.3.1 多维数组的创建
在MATLAB中创建和使用一维和两维数组十分灵活，同样MATLAB也提供了灵活多样的创建多维数组的方法，使得用户可以根据自己所创建多维数组的特征选取不同的创建方法。其中最常用的创建方法有：第一通过“全下标”元素赋值方式创建多维数组；第二由函数ones、zeros、rand和randn直接创建多维数组；第三借助构造函数创建多维数组。下面通过示例讲解如何使用不同的方法创建多维数组。

（1）通过“全下标”元素赋值方式创建多维数组
>【例2.15】“全下标”方式创建多维数组
在MATLAB命令行窗口中输入以下命令，创建一个二维的四阶魔方阵：
`>> A=magic(4) %生成一个二维的四阶魔方阵`
以矩阵A为基础，通过直接定义数组的第三维的方式，创建一个三维数组。在命令窗口中输入：
`>> A(:,:,2)=rand(4) %四阶的随机阵`
上述语句的执行结果如下所示。
`A(:,:,1) =
 16 2 3 13
 5 11 10 8
 9 7 6 12
 4 14 15 1`
`A(:,:,2) =
 0.4451 0.8462 0.8381 0.8318
 0.9318 0.5252 0.0196 0.5028
 0.4660 0.2026 0.6813 0.7095
 0.4186 0.6721 0.3795 0.4289`

（2）由函数`ones、zeros、rand和randn`直接创建多维数组
前面介绍到了使用函数`ones、zeros、rand和randn`可以直接生成二维数组，除了生成二维数组的功能外，这些函数还可以生成多维数组。

>【例2.16】用函数`ones、zeros、rand和randn`直接创建三维随机数组
`>> A=rand(4,5,3) %创建三维随机数组`
`>> B=ones(4,2,6) %创建三维的单位矩阵`
`>> C=zeros(4,6,8); %创建三维的零值矩阵`

（３）借助构造函数创建多维数组
多维数组的构造函数很多，如`cat、repmat、reshape`等，在这里主要介绍几个常用的构造函数。表2.5所示为使用`cat, repmat和reshape`函数构造多维数组的函数调用格式和函数描述。 
|函数名	|调用格式|	函数描述|
|------|-----|------|
|`Cat`|`	A=cat(n,A1,A2,…,Am)`|	n=1和n=2时分别构造[A1；A2]和[A1，A2]，它们都是二维数组，而n=3时可以构造出三维数组|
|`repmat`|`	repmat(p,行 列 页 ……)`|	第一个输入变量p是用来放置的模块数组，后面的变量是要放置指定的维数。|
|`reshape`|`	reshape(p,行 列 页 ……)	`|第一个变量是待重组的数组p，后面的变量是重新生成数组的行数、列数、页数等。|

>【例2.17】构造函数`cat、repmat、reshape`创建多维数组
首先生成构造函数使用的两个矩阵A和B，具体如下：
`>> A=rand(4) %二维数组A`
`>> B=rand(4) %二维数组B`
以下使用`cat`函数生成一个新的二维数组n=2，在命令窗口中输入：
`>> C=cat(2,A,B)  ` 
使用`cat`函数生成一个新的三维数组n=3，在命令窗口中输入：
`>> D=cat(3,A,B)    `

>注意：*使用`reshape`函数时要注意新生成的矩阵元素数量不变，否则无法生成。*

### 2.3.2 多维数组的标识
MATLAB中提供了许多指令可以用来判断数组的维数和大小等操作的函数，给用户使用数组带来很大的方便，尤其是在使用多维数组的情况下，可以方便的查看多维数组的一些信息。如表2.5所示，列出了几个常用的函数。
|函数名	|功能|
|-------|-----------|
|`ndims (P)`|	返回数组P的维数|
|`[m,n,…]=size(P)`|	返回数组P各维的大小|
|`m=size(P,x)`|	返回数组P某一维的大小|
|`length(P)`|	返回数组P的行数或列数的最大值|
|`max(size(P))`|	返回数组P的行数或列数的最大值，与length(P)的功能相同|

>【例2.18】以三维数组A为例，查看矩阵的维数、各维大小以及所有维中最大长度。
`>> A=rand(4,5,2) %生成三维均匀分布的随机数组A`
①使用ndims函数查看数组A维数，在命令窗口中输入：
`>> ndims(A)  ` 
返回数组A的维数显示如下：
`ans = 3`
②使用size函数查看数组A中各维的大小，在命令窗口中输入：
`>> size(A) %查看数组A中各维的大小`
返回数组A中各维的大小显示如下：
`ans = 4 5 2`
③使用length函数查看数组A各维中的最大长度，在命令窗口中输入：
`>> length(A) `
返回数组A各维中的最大长度显示如下：
`ans = 5`


## 2.4  本章小结
本章重点介绍了一些常用的基本概念、数组和矩阵的创建以及矩阵元素的操作等内容。

基本概念部分介绍了MATLAB中经常使用的常量和变量的定义和使用规则，简单介绍了数组和矩阵在MATLAB中的表示方式以及两者的区别。
数组和矩阵的创建和操作部分使用大量的实例介绍了低维数组和矩阵的创建方法，介绍了矩阵元素的全下标和单下标标识方法，在此基础上重点介绍了矩阵元素的寻访及矩阵的赋值、元素删除、子矩阵提取、矩阵变维等各种操作。掌握这部分内容是学习和使用MATLAB的基础。

多维数组部分通过实例介绍了如何创建多维数组以及多维数组的操作等内容。
